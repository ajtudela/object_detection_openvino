<?xml version="1.0" encoding="utf-8"?>
<launch>
	<!-- Launch nodelet -->
	<node pkg="nodelet" type="nodelet" name="vision_manager"  args="manager" output="screen" />

	<!-- Launch Intel RealSense -->
	<include file="$(find realsense2_camera)/launch/rs_camera.launch">
		<arg name="camera" 				value="realsense"/>
		<arg name="external_manager" 	value="true"/>
		<arg name="manager" 			value="/vision_manager"/>
		<arg name="align_depth" 		value="true"/>
		<arg name="enable_fisheye"		value="false"/>
		<arg name="enable_infra1"		value="false"/>
		<arg name="enable_infra2"		value="false"/>
		<arg name="enable_gyro"			value="false"/>
		<arg name="enable_accel"		value="false"/>
		<arg name="enable_pointcloud"   value="true"/>
		<arg name="ordered_pc" 			value="true"/>
		<arg name="filters"				value="decimation,hdr_merge,disparity,spatial,temporal"/>
		<arg name="clip_distance" 		value="4"/>
	</include>

	<!-- Launch object detection -->
	<node pkg="nodelet" type="nodelet" name="object_detection" args="load object_detection_openvino/ObjectDetectionVPUNodelet vision_manager" output="screen" >
		<param name="color_topic"				value="/realsense/color/image_raw"/>
		<param name="depth_info_topic"			value="/realsense/aligned_depth_to_color/camera_info"/>
		<param name="depth_topic"				value="/realsense/aligned_depth_to_color/image_raw"/>
		<param name="detection_image_topic"		value="image_raw"/>
		<param name="detection_info_topic"		value="detection_info"/>
		<param name="detections_topic"			value="detections"/>
		<param name="model_thresh"				value="0.4"/>
		<param name="model_iou_thresh"			value="0.4"/>
		<param name="model_xml"					value="$(find object_detection_openvino)/models/mobilenet-ssd/FP16/mobilenet-ssd.xml"/>
		<param name="model_bin"					value="$(find object_detection_openvino)/models/mobilenet-ssd/FP16/mobilenet-ssd.bin"/>
		<param name="model_labels"				value="$(find object_detection_openvino)/models/mobilenet-ssd/FP16/mobilenet-ssd.labels"/>
		<param name="model_type"				value="SSD"/>
		<param name="device_target"				value="MYRIAD"/>
		<param name="show_fps"					value="false"/>
		<param name="output_image"				value="true"/>
	</node>
</launch>


